<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>HEMA - Human Evaluation of Medical AI</title>

        <!-- External CSS Dependencies -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Modular CSS -->
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="css/components.css" />
        <link rel="stylesheet" href="css/responsive.css" />
    </head>
    <body>
        <!-- Navigation Bar -->
        <nav
            class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm"
            style="
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            "
        >
            <div class="container-fluid px-4">
                <a
                    class="navbar-brand fw-bold d-flex align-items-center"
                    href="#"
                    style="color: #6366f1; font-size: 1.5rem"
                >
                    <div
                        class="d-flex align-items-center justify-content-center me-3"
                        style="
                            width: 40px;
                            height: 40px;
                            background: linear-gradient(
                                135deg,
                                #6366f1 0%,
                                #8b5cf6 100%
                            );
                            border-radius: 12px;
                        "
                    >
                        <i
                            class="fas fa-heartbeat text-white"
                            style="font-size: 1.2rem"
                        ></i>
                    </div>
                    <span style="letter-spacing: -0.5px">HEMA</span>
                </a>
                <span
                    class="navbar-text ms-3"
                    style="color: #64748b; font-size: 0.95rem; font-weight: 500"
                >
                    Human Evaluation of Medical AI Platform
                </span>
            </div>
        </nav>

        <!-- Landing Page -->
        <div
            id="landing-page"
            class="min-vh-100 d-flex align-items-center"
            style="
                padding-top: 60px;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            "
        >
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center mb-5">
                        <h1
                            class="display-3 fw-bold mb-3"
                            style="
                                background: linear-gradient(
                                    135deg,
                                    #667eea 0%,
                                    #764ba2 100%
                                );
                                -webkit-background-clip: text;
                                background-clip: text;
                                -webkit-text-fill-color: transparent;
                            "
                        >
                            HEMA Platform
                        </h1>
                        <p class="lead text-muted">
                            Human Evaluation of Medical AI Platform
                        </p>
                    </div>
                </div>

                <div class="row g-4">
                    <div class="col-lg-10 col-xl-8 mx-auto">
                        <div class="row g-4 justify-content-center">
                            <div class="col-md-6 col-lg-5">
                                <div
                                    class="card h-100 border-0 shadow-lg hover-lift"
                                >
                                    <div
                                        class="card-body text-center d-flex flex-column p-4"
                                    >
                                        <div
                                            class="icon-wrapper mb-3 mx-auto"
                                            style="
                                                width: 80px;
                                                height: 80px;
                                                background: linear-gradient(
                                                    135deg,
                                                    #11998e 0%,
                                                    #38ef7d 100%
                                                );
                                                border-radius: 50%;
                                                display: flex;
                                                align-items: center;
                                                justify-content: center;
                                            "
                                        >
                                            <i
                                                class="fas fa-layer-group fa-2x text-white"
                                            ></i>
                                        </div>
                                        <h4 class="card-title fw-bold">
                                            Segmentation
                                        </h4>
                                        <p
                                            class="card-text text-muted flex-grow-1"
                                        >
                                            Analyze medical image segmentation
                                            with overlay visualization and label
                                            category detection.
                                        </p>
                                        <button
                                            class="btn btn-lg btn-gradient-success w-100"
                                            data-mode="segmentation"
                                        >
                                            <i
                                                class="fas fa-layer-group me-2"
                                            ></i
                                            >Start Evaluation
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-5">
                                <div
                                    class="card h-100 border-0 shadow-lg hover-lift"
                                >
                                    <div
                                        class="card-body text-center d-flex flex-column p-4"
                                    >
                                        <div
                                            class="icon-wrapper mb-3 mx-auto"
                                            style="
                                                width: 80px;
                                                height: 80px;
                                                background: linear-gradient(
                                                    135deg,
                                                    #fa709a 0%,
                                                    #fee140 100%
                                                );
                                                border-radius: 50%;
                                                display: flex;
                                                align-items: center;
                                                justify-content: center;
                                            "
                                        >
                                            <i
                                                class="fas fa-file-alt fa-2x text-white"
                                            ></i>
                                        </div>
                                        <h4 class="card-title fw-bold">
                                            Text Analysis
                                        </h4>
                                        <p
                                            class="card-text text-muted flex-grow-1"
                                        >
                                            Evaluate AI-generated medical text,
                                            reports, and natural language
                                            processing outputs.
                                        </p>
                                        <button
                                            class="btn btn-lg btn-gradient-info w-100"
                                            data-mode="text"
                                        >
                                            <i class="fas fa-file-alt me-2"></i
                                            >Start Evaluation
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Segmentation Mode -->
        <div
            id="mode-segmentation"
            style="
                display: none;
                padding-top: 60px;
                padding-bottom: 40px;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            "
        >
            <div class="container">
                <div class="row mb-2">
                    <div class="col-12">
                        <div class="d-flex align-items-center mb-2">
                            <button
                                class="btn btn-light shadow-sm back-button"
                            >
                                <i class="fas fa-arrow-left me-2"></i>Back
                            </button>
                            <h2 class="flex-grow-1 text-center mb-0 fw-bold">
                                Segmentation Evaluation
                            </h2>
                            <div style="width: 73px"></div>
                        </div>
                    </div>
                </div>

                <div class="row g-4 justify-content-center">
                    <div class="col-lg-10">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="card border-0 shadow-lg h-100">
                                    <div class="card-body p-4">
                                        <div
                                            class="d-flex align-items-center mb-3"
                                        >
                                            <div
                                                class="icon-wrapper me-3"
                                                style="
                                                    width: 48px;
                                                    height: 48px;
                                                    background: linear-gradient(
                                                        135deg,
                                                        #11998e 0%,
                                                        #38ef7d 100%
                                                    );
                                                    border-radius: 12px;
                                                    display: flex;
                                                    align-items: center;
                                                    justify-content: center;
                                                "
                                            >
                                                <i
                                                    class="fas fa-image text-white"
                                                ></i>
                                            </div>
                                            <div>
                                                <h5 class="mb-0 fw-bold">
                                                    Medical Image
                                                </h5>
                                                <small class="text-muted"
                                                    >Base scan data</small
                                                >
                                            </div>
                                        </div>
                                        <div
                                            class="upload-area p-3 border-2 border-dashed rounded-3"
                                            style="
                                                background: #f8f9fa;
                                                border-color: #dee2e6 !important;
                                            "
                                        >
                                            <input
                                                type="file"
                                                id="imageFile"
                                                class="form-control mb-2"
                                                accept=".nrrd,.nii,.nii.gz"
                                            />
                                            <small class="form-text text-muted"
                                                >NRRD, NIfTI (.nii/.nii.gz)
                                                formats</small
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 shadow-lg h-100">
                                    <div class="card-body p-4">
                                        <div
                                            class="d-flex align-items-center mb-3"
                                        >
                                            <div
                                                class="icon-wrapper me-3"
                                                style="
                                                    width: 48px;
                                                    height: 48px;
                                                    background: linear-gradient(
                                                        135deg,
                                                        #f093fb 0%,
                                                        #f5576c 100%
                                                    );
                                                    border-radius: 12px;
                                                    display: flex;
                                                    align-items: center;
                                                    justify-content: center;
                                                "
                                            >
                                                <i
                                                    class="fas fa-tags text-white"
                                                ></i>
                                            </div>
                                            <div>
                                                <h5 class="mb-0 fw-bold">
                                                    Segmentation Labels
                                                </h5>
                                                <small class="text-muted"
                                                    >Overlay annotations</small
                                                >
                                            </div>
                                        </div>
                                        <div
                                            class="upload-area p-3 border-2 border-dashed rounded-3"
                                            style="
                                                background: #f8f9fa;
                                                border-color: #dee2e6 !important;
                                            "
                                        >
                                            <input
                                                type="file"
                                                id="labelFile"
                                                class="form-control mb-2"
                                                accept=".nrrd,.nii,.nii.gz"
                                            />
                                            <small class="form-text text-muted"
                                                >Must match image
                                                dimensions</small
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Text Analysis Mode -->
        <div
            id="mode-text"
            style="
                display: none;
                padding-top: 60px;
                padding-bottom: 40px;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            "
        >
            <div class="container">
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="d-flex align-items-center mb-3">
                            <button
                                class="btn btn-light shadow-sm back-button"
                            >
                                <i class="fas fa-arrow-left me-2"></i>Back
                            </button>
                            <h2 class="flex-grow-1 text-center mb-0 fw-bold">
                                Text Analysis Evaluation
                            </h2>
                            <div style="width: 73px"></div>
                        </div>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="card border-0 shadow-lg">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-4">
                                    <div
                                        class="icon-wrapper me-3"
                                        style="
                                            width: 48px;
                                            height: 48px;
                                            background: linear-gradient(
                                                135deg,
                                                #fa709a 0%,
                                                #fee140 100%
                                            );
                                            border-radius: 12px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                        "
                                    >
                                        <i
                                            class="fas fa-file-alt text-white"
                                        ></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0 fw-bold">
                                            Medical Text Analysis
                                        </h5>
                                        <small class="text-muted"
                                            >Evaluate AI-generated medical
                                            content</small
                                        >
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label
                                        for="textInput"
                                        class="form-label fw-semibold"
                                        >Input Text</label
                                    >
                                    <textarea
                                        id="textInput"
                                        class="form-control"
                                        rows="12"
                                        placeholder="Paste AI-generated medical text, reports, or clinical notes here for evaluation..."
                                        style="
                                            font-family:
                                                &quot;Inter&quot;, sans-serif;
                                            line-height: 1.6;
                                        "
                                    ></textarea>
                                </div>
                                <div class="d-flex gap-2">
                                    <button
                                        class="btn btn-gradient-primary btn-lg px-4"
                                    >
                                        <i class="fas fa-microscope me-2"></i
                                        >Analyze Text
                                    </button>
                                    <button
                                        class="btn btn-outline-secondary btn-lg px-4"
                                    >
                                        <i class="fas fa-upload me-2"></i>Upload
                                        File
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modern Separator -->
        <div id="viewer-separator" class="container mt-3 mb-3" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1" style="height: 1px; background: linear-gradient(90deg, transparent, rgba(100, 116, 139, 0.2), transparent);"></div>
                        <div class="mx-3">
                            <span class="badge bg-white text-muted border shadow-sm px-4 py-3" style="font-size: 1rem;">
                                <i class="fas fa-chart-line me-2"></i>Visualization
                            </span>
                        </div>
                        <div class="flex-grow-1" style="height: 1px; background: linear-gradient(90deg, transparent, rgba(100, 116, 139, 0.2), transparent);"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shared Viewer Container -->
        <div id="viewer-container" class="container mb-3" style="display: none">
            <div class="row">
                <div class="col-12">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body p-0">
                            <div id="viewer" class="viewer-container">
                                <!-- Segmentation Viewer -->
                                <div
                                    id="canvas-container"
                                    style="display: none; position: relative;"
                                >
                                    <canvas id="imageCanvas"></canvas>
                                    <canvas id="labelCanvas"></canvas>
                                    <!-- Zoom Controls Overlay -->
                                    <div id="zoom-controls" style="position: absolute; top: 10px; right: 10px; z-index: 1000; background: rgba(255, 255, 255, 0.9); border-radius: 8px; padding: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; flex-direction: column; gap: 5px;">
                                        <button id="zoomIn" class="btn btn-outline-secondary btn-sm" style="padding: 6px 10px;">
                                            <i class="fas fa-search-plus"></i>
                                        </button>
                                        <button id="resetView" class="btn btn-outline-secondary btn-sm" style="padding: 6px 10px;">
                                            <i class="fas fa-expand-arrows-alt"></i>
                                        </button>
                                        <button id="zoomOut" class="btn btn-outline-secondary btn-sm" style="padding: 6px 10px;">
                                            <i class="fas fa-search-minus"></i>
                                        </button>
                                        <span class="badge bg-success rounded-pill px-2 text-center" id="zoomValue" style="min-width: 50px; font-size: 11px;">100%</span>
                                    </div>
                                </div>
                                <div
                                    id="error"
                                    class="alert alert-danger"
                                    style="display: none"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Segmentation Controls -->
            <div class="row mt-3" id="controls" style="display: none">
                <div class="col-12">
                    <div class="card border-0 shadow">
                        <div class="card-body">
                            <div class="row g-4 align-items-center">
                                <div class="col-md-6">
                                    <div class="control-group">
                                        <label
                                            for="sliceSlider"
                                            class="form-label fw-semibold"
                                        >
                                            <i
                                                class="fas fa-layer-group me-2 text-primary"
                                            ></i
                                            >Slice Navigation
                                        </label>
                                        <div
                                            class="d-flex align-items-center gap-3"
                                        >
                                            <input
                                                type="range"
                                                id="sliceSlider"
                                                class="form-range flex-grow-1"
                                                min="0"
                                                max="0"
                                                value="0"
                                            />
                                            <span
                                                class="badge bg-primary rounded-pill px-3"
                                                id="sliceInfo"
                                                style="min-width: 60px"
                                                >1/1</span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="control-group">
                                        <label
                                            for="opacitySlider"
                                            class="form-label fw-semibold"
                                        >
                                            <i
                                                class="fas fa-adjust me-2 text-info"
                                            ></i
                                            >Label Opacity
                                        </label>
                                        <div
                                            class="d-flex align-items-center gap-3"
                                        >
                                            <input
                                                type="range"
                                                id="opacitySlider"
                                                class="form-range flex-grow-1"
                                                min="0"
                                                max="100"
                                                value="50"
                                            />
                                            <span
                                                class="badge bg-info rounded-pill px-3"
                                                id="opacityValue"
                                                style="min-width: 60px"
                                                >50%</span
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- External JavaScript Dependencies -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Main Application Script -->
        <script src="js/hema-app.js"></script>
    </body>
</html>